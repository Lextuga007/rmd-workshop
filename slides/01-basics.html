<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>R Markdown Basics</title>
    <meta charset="utf-8" />
    <meta name="author" content="Zo√´ Turner" />
    <meta name="date" content="2022-02-14" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <script src="libs/clipboard/clipboard.min.js"></script>
    <link href="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
    <link href="libs/shareon/shareon.min.css" rel="stylesheet" />
    <script src="libs/shareon/shareon.min.js"></script>
    <link href="libs/xaringanExtra-shareagain/shareagain.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-shareagain/shareagain.js"></script>
    <link href="libs/countdown/countdown.css" rel="stylesheet" />
    <script src="libs/countdown/countdown.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/my-theme.css" type="text/css" />
    <link rel="stylesheet" href="assets/css/my-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">






class: title-slide, center, middle

&lt;span class="fa-stack fa-4x"&gt;
  &lt;i class="fa fa-circle fa-stack-2x" style="color: #ffffffcc;"&gt;&lt;/i&gt;
  &lt;strong class="fa-stack-1x" style="color:#e7553c;"&gt;01&lt;/strong&gt;
&lt;/span&gt; 

# R Markdown Basics

## Adapted from slides by Alison Hill

### Zo√´ Turner 

#### [https://philosopher-analyst.netlify.app/rmd-workshop/](https://philosopher-analyst.netlify.app/rmd-workshop/)


---
class: middle, center

| Time          | Activity                                                      |
|:--------------|:--------------------------------------------------------------|
| 09:30 - 11:00 | Session 1 (R Markdown Basics)                                 |
| 11:00 - 11:30 | *Break* ‚òï                                 |
| 11:30 - 13:00 | Session 2 (Advanced R Markdown)                               |
| 13:00 - 14:00 | *Lunch* üç±                                  |
| 14:00 - 15:30 | Session 3 (Templates)                                         |
| 15:30 - 16:00 | *Break* üçµ                                    |
| 16:00 - 16:30 | Session 4 (Collections)                                       |

---
layout: true

&lt;div class="my-footer"&gt;&lt;span&gt;https://philosopher-analyst.netlify.app/rmd-workshop/&lt;/span&gt;&lt;/div&gt;

---






.left-column[
&lt;span class="fa-stack fa-4x"&gt;
  &lt;i class="fa fa-circle fa-stack-2x" style="color: #f2e255;"&gt;&lt;/i&gt;
  &lt;strong class="fa-stack-1x" style="color: #fff;"&gt;?&lt;/strong&gt;
&lt;/span&gt; 
]

.right-column[

# What is R Markdown?


1. An authoring framework for data science.

1. A document format (`.Rmd`).

1. An R package named `rmarkdown`.

1. A file format for making dynamic documents with R. 

1. A tool for integrating prose, code, and results.

1. A computational document.

1. Wizardry.

]

---

.left-column[
&lt;span class="fa-stack fa-4x"&gt;
  &lt;i class="fa fa-circle fa-stack-2x" style="color: #f2e255"&gt;&lt;/i&gt;
  &lt;strong class="fa-stack-1x" style="color: #fff;"&gt;?&lt;/strong&gt;
&lt;/span&gt; 
]

.right-column[

# What is R Markdown?

1. ["An authoring framework for data science."](https://rmarkdown.rstudio.com/lesson-1.html) (‚úîÔ∏è)

1. [A document format (`.Rmd`).](https://bookdown.org/yihui/rmarkdown/) (‚úîÔ∏è)

1. [An R package named `rmarkdown`.](https://rmarkdown.rstudio.com/docs/) (‚úîÔ∏è)

1. ["A file format for making dynamic documents with R."](https://rmarkdown.rstudio.com/articles_intro.html) (‚úîÔ∏è)

1. ["A tool for integrating text, code, and results."](https://r4ds.had.co.nz/communicate-intro.html) (‚úîÔ∏è)

1. ["A computational document."](http://radar.oreilly.com/2011/07/wolframs-computational-documen.html) (‚úîÔ∏è)

1. Wizardry. (üßô‚Äç‚ôÇÔ∏è)

]

---

.left-column[

# &lt;i class="fab fa-github"&gt;&lt;/i&gt;

]

.right-column[

# Go here:

[https://github.com/ysc2019-workshop/01-basics](https://github.com/ysc2019-workshop/01-basics)

Click on "Use this template" (make sure you are logged in)

&lt;img src="images/cloud-from-template.png" width="3840" /&gt;

]

---

.left-column[

# &lt;i class="fab fa-github"&gt;&lt;/i&gt;

]

.right-column[

# In your repo

Click on green button, then the clipboard to copy HTTPS

&lt;img src="images/cloud-from-https.png" width="3840" /&gt;
]

---

.left-column[

# &lt;i class="fas fa-cloud"&gt;&lt;/i&gt;

]

.right-column[

# Go to rstudio.cloud:

[https://rstudio.cloud/](https://rstudio.cloud/)

1. Join space &gt; Click on "Projects" (nothing there)

1. New Project from GitHub Repo

1. Use **your** HTTPS link:


  &lt;img src="images/cloud-from-git.png" width="50%" /&gt;

1. Name your project

]

---

.left-column[

# &lt;i class="fas fa-cloud"&gt;&lt;/i&gt;

]

.right-column[

# Install packages


```r
install.packages(c("tidyverse", "rmarkdown", "here", 
                   "glue", "usethis", "wesanderson"))
```

]

???
When the rmds are opened RStudio will say along the top if there are any references
to packages that haven't been installed but the next slide includes a package that 
isn't in the code {usethis}

---

.left-column[

# &lt;i class="fas fa-cloud"&gt;&lt;/i&gt;

]

.right-column[

# Connect to GitHub

Still in rstudio.cloud:


```r
library(usethis)
use_git_config(
  scope = "project",
  user.name = "Jane",
  user.email = "jane@example.org"
)
```

]

---
class: your-turn

# Your turn

Time to look at `01-bakeoff-report.Rmd`. 
Look at the source, then üß∂ **Knit** to HTML.

Try to identify these parts in the source and the output:

1. The **metadata**

1. The **text** 

1. The **code**

1. The **output**

**If this was easy**, try to find all code that produces a *plot*.


<div class="countdown" id="timer_620ab95a" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
class: live-code

# Basic anatomy I

We look at the *source* anatomy for `01-bakeoff-report.Rmd` together:

1. The **metadata**

1. The **text** 

1. The **code**
    

???
Point out the parts in the Rmd script. For further documentation on metadata
https://rmarkdown.rstudio.com/docs/reference/rmd_metadata.html
    
---

class: live-code

# Basic anatomy II

We look at the *output* anatomy for `01-bakeoff-report.Rmd` together:

1. The **metadata**

1. The **text** 

1. The **code**

1. The **output**


---
background-image: url(images/rmarkdown_wizards.png)
background-size: contain

.footnote[Art by [Allison Horst](https://twitter.com/allison_horst?lang=en)]

---
class: middle, center

# What is inside in more detail?

![](images/doc-make.jpg)

---
class: middle, center, inverse

&lt;span class="fa-stack fa-4x"&gt;
  &lt;i class="fa fa-circle fa-stack-2x" style="color: #fff;"&gt;&lt;/i&gt;
  &lt;strong class="fa-stack-1x" style="color:#17a2b8;"&gt;1 &lt;/strong&gt;
&lt;/span&gt; 

--

# Metadata

---

# metadata: YAML

.pull-left[

_"YAML Ain't Markup Language"_

```yaml
---
key: value
---
```

]

.pull-right[

&lt;img src="images/orchestra.jpg" width="75%" style="display: block; margin: auto;" /&gt;

]

???

Using the {ymlthis} this section renders the "look" of the YAML with the three 
dashes then key: value which is the format used in YAML. 

---
class: middle, center

# Output options

---

# Save output options in your YAML

.pull-left[

```yaml
---
title: The Great British Bake Off
output: html_document
---
```

```yaml
---
title: The Great British Bake Off
output:
  html_document:
    toc: true
---
```


]

.pull-right[

&lt;img src="images/orchestra.jpg" width="75%" style="display: block; margin: auto;" /&gt;

]

---
class: your-turn

# Your turn

## Add output options to YAML

Use `?html_document` from your R console to find the code to:

1. Add a floating table of contents

1. Add a theme

üß∂ **Knit** to HTML to see the output.

**If this was easy**, try to embed the `Rmd` source code to download.

_psst...answers on the next slide..._

<div class="countdown" id="timer_620ab94c" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">03</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
class: your-turn

# Answers

```yaml
---
title: The Great British Bake Off
output:
  html_document:
    toc: true
    toc_float: true
    theme: flatly
    code_download: true
---
```

---

# Parameters

```yaml
---
title: The Great British Bake Off
output:
  html_document:
    toc: true
    toc_float: true
    theme: flatly
    code_download: true
params:
  series: '1'
---
```

???

Some may be familiar to the concept of parameters from SQL where code use in multiple
places later in the script are written at the top so they can be easily changed. 

This is a particular example of this 'hard coding' of parameters.

---
class: your-turn

# Your turn

.pull-left[

Change this:

```yaml
---
title: The Great British Bake Off
output:
  html_document:
    toc: true
    toc_float: true
    theme: flatly
    code_download: true
params:
  series: '1'
---
```

]

.pull-right[

To this:

```yaml
---
title: The Great British Bake Off
output:
  html_document:
    toc: true
    toc_float: true
    theme: flatly
    code_download: true
params:
  series: '2'
---
```

]

Now click on knit button and pick __"Knit with Parameters."__ How is this different from what you did above?


<div class="countdown" id="timer_620ab8c8" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">03</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
class: inverse, center, middle

&lt;span class="fa-stack fa-4x"&gt;
  &lt;i class="fa fa-circle fa-stack-2x" style="color: #fff;"&gt;&lt;/i&gt;
  &lt;strong class="fa-stack-1x" style="color:#17a2b8;"&gt;2 &lt;/strong&gt;
&lt;/span&gt; 

--

# Text

---

# &lt;center&gt;Headers&lt;/center&gt;

--

.pull-left[
```markdown
# HEADER 1

## HEADER 2

### HEADER 3

#### HEADER 4

##### HEADER 5

###### HEADER 6
```
]

???
Make sure that there is a space between the hashes and the text as it won't be picked up otherwise.

--

.pull-right[
# HEADER 1

## HEADER 2

### HEADER 3

#### HEADER 4

##### HEADER 5

###### HEADER 6
]

---
class: middle, center


&lt;img src="images/rmd-nav.png" width="80%" /&gt;

???
Navigate chunks by using the menu in RStudio. Chunks will work without names but
will have default names like Chunk 1, Chunk 2 and so on.

---

# &lt;center&gt;Text&lt;/center&gt;

--

.pull-left[
```markdown
 **The Great British Bake Off** 
(often abbreviated to _Bake Off_ or _GBBO_) 
is a British television baking competition.
```
]

--

.pull-right[

**The Great British Bake Off** 
(often abbreviated to _Bake Off_ or _GBBO_) 
is a British television baking competition. 

]

???

Using markdown language we format text as bold or italics. 

---
class: middle, center

# &lt;center&gt;Visual Markdown Editing&lt;/center&gt;

--

![Screenshot of Visual Editor button, looks like an A, also a compass](images/visual-editor-rstudio.PNG)

???

As of [RStudio version 1.4](https://www.rstudio.com/blog/rstudio-v1-4-preview-visual-markdown-editing/)
there is now Visual Markdown Editing, located in the Editor pane (when an RMarkdown script is open)

---
class: middle, center

# &lt;center&gt;Default to Visual Editor&lt;/center&gt;

--

![Screenshot of Tools/Global Options/RMarkdown/Visual with option to make Editor view default](images/visual-editor-default.PNG)

---
class: top

# &lt;center&gt;Lists&lt;/center&gt;

--

.pull-left[

```markdown
The original cast included:

- Sue Perkins (_host_)
- Mel Giedroyc (_host_)
- Mary Berry (_judge_) and
- Paul Hollywood (_judge_).

In each episode, the amateur bakers are 
given **three challenges** based on that 
week's theme.

1. a signature bake,
1. a technical challenge,
1. a show-stopper.
```

]

--

.pull-right[

The original cast included:

- Sue Perkins (_host_)
- Mel Giedroyc (_host_)
- Mary Berry (_judge_) and
- Paul Hollywood (_judge_).

In each episode, the amateur bakers are 
given **three challenges** based on that 
week's theme.

1. a signature bake,
1. a technical challenge,
1. a show-stopper.

]

---

# &lt;center&gt;Images&lt;/center&gt;

--

.pull-left[
```markdown
Competitive baking, such as making Victoria 
sponge (_pictured_), is part of the classic 
English village f√™te,
which inspired the series.
![Alt text: picture of a sponge cake from a village competition](http://bit.ly/blue-ribbon-sponge)
```
]

--

.pull-right[
Competitive baking, such as making Victoria 
sponge (_pictured_), is part of the classic 
English village f√™te,
which inspired the series.
![Alt text: picture of a sponge cake from a village competition](http://bit.ly/blue-ribbon-sponge)
]

???

A simple markdown code line for linking to an image online. html can be used
too which can be useful if you need to resize the pictures.

---

# &lt;center&gt;Images - html&lt;/center&gt;

--

.pull-left[
```markdown
Competitive baking, such as making Victoria 
sponge (_pictured_), is part of the classic 
English village f√™te,
which inspired the series.
&lt;div id="bg"&gt;
  &lt;img src="http://bit.ly/blue-ribbon-sponge" alt="picture of a sponge cake from a village competition"&gt;
&lt;/div&gt; 
```
]

--

.pull-right[
Competitive baking, such as making Victoria 
sponge (_pictured_), is part of the classic 
English village f√™te,
which inspired the series.
&lt;div id="bg"&gt;
  &lt;img src="http://bit.ly/blue-ribbon-sponge" alt="Picture of a sponge cake from a village competition"&gt;
&lt;/div&gt; 
]

???
html can be used too 

---

# &lt;center&gt;Alt Text&lt;/center&gt;

--

.pull-left[
When images break, they still make sense
]

--

.pull-right[
Competitive baking, such as making Victoria 
sponge (_pictured_), is part of the classic 
English village f√™te,
which inspired the series.
![Alt text: picture of a sponge cake from a village competition](http://bit.ly/blue-ribbon)
]


???
Alternative text is useful for people who use screen readers but also helpful 
for when the image link breaks, you now get a description of what you should be 
seeing.

---

# &lt;center&gt;Links&lt;/center&gt;

--

.pull-left[
```markdown
Competitive baking, such as making Victoria 
sponge (_pictured_), is part of the classic 
English village f√™te,
which inspired the series.

[Photo](https://en.wikipedia.org/wiki/Philosophy)

![Alt text: picture of a sponge cake from a village competition](http://bit.ly/blue-ribbon-sponge)
```
]

--

.pull-right[
Competitive baking, such as making Victoria 
sponge (_pictured_), is part of the classic 
English village f√™te,
which inspired the series.

[Photo](https://en.wikipedia.org/wiki/Philosophy)

![Alt text: picture of a sponge cake from a village competition](http://bit.ly/blue-ribbon-sponge)
]

---

# &lt;center&gt;Links - html&lt;/center&gt;

--

.pull-left[
```markdown
Competitive baking, such as making Victoria 
sponge (_pictured_), is part of the classic 
English village f√™te,
which inspired the series.
  &lt;a href="https://en.wikipedia.org/wiki/Philosophy"&gt;
  &lt;img src="http://bit.ly/blue-ribbon-sponge" alt="Picture of a sponge cake from a village competition" 
  &lt;/a&gt;
```
]

--

.pull-right[
Competitive baking, such as making Victoria 
sponge (_pictured_), is part of the classic 
English village f√™te,
which inspired the series.
  &lt;a href="https://en.wikipedia.org/wiki/Philosophy"&gt;
  &lt;img src="http://bit.ly/blue-ribbon-sponge" alt="Picture of a sponge cake from a village competition" 
  &lt;/a&gt;
]

???
A good site for more information on html is [W3schools](https://www.w3schools.com/html/html_images.asp)


---

name: 03-formative
class: middle

# Quiz

--

.pull-left[

How do you add headers in Markdown?

`! Header`

`- Header`

`# Header`

`1. Header`

]

--

.pull-right[

What about lists? Bulleted? Numbered?

`! Item 1`

`- Item 1`

`# Item 1`

`1. Item 1`

]

---
class: inverse, center, middle

&lt;span class="fa-stack fa-4x"&gt;
  &lt;i class="fa fa-circle fa-stack-2x" style="color: #fff;"&gt;&lt;/i&gt;
  &lt;strong class="fa-stack-1x" style="color:#17a2b8;"&gt;3 &lt;/strong&gt;
&lt;/span&gt; 

--

# &lt;i class="fab fa-r-project"&gt;&lt;/i&gt; code

---

# Code chunks

.pull-left[

````
```{r}
ratings %&gt;% 
  filter(series == 1) %&gt;% 
  top_n(1, viewers_7day)
```
````

What is the fate of this chunk?

]

--

.pull-right[


```r
ratings %&gt;% 
  filter(series == 1) %&gt;% 
  top_n(1, viewers_7day)
#&gt; # A tibble: 1 x 9
#&gt;   series episode uk_airdate viewers_7day viewers_28day network_rank
#&gt;   &lt;fct&gt;  &lt;fct&gt;   &lt;date&gt;            &lt;dbl&gt;         &lt;dbl&gt;        &lt;int&gt;
#&gt; 1 1      5       2010-09-14         3.03             1           NA
#&gt; # ... with 3 more variables: channels_rank &lt;int&gt;, bbc_iplayer_requests &lt;dbl&gt;,
#&gt; #   episode_count &lt;dbl&gt;
```

]

???

This is a view of the data that would normally go to the Console so includes information
like data types.

Copy and paste into the `01-bakeoff-report.Rmd` and knit to see it in the report.

---

# Code chunks

.pull-left[

````
```{r}
top_viewers &lt;- ratings %&gt;% 
  filter(series == 1) %&gt;% 
  top_n(1, viewers_7day)
```
````

What fate do you predict here?

]

--

.pull-right[


```r
top_viewers &lt;- ratings %&gt;% 
  filter(series == 1) %&gt;% 
  top_n(1, viewers_7day)
```
]

???

Not quite what we expect as this is just the code showing, not the results, which
is the main aim of RMarkdown. 

---

# Code chunks

.pull-left[

````
```{r}
top_viewers &lt;- ratings %&gt;% 
  filter(series == 1) %&gt;% 
  top_n(1, viewers_7day)
  
top_viewers
```
````

]

???
Adding the object name to run - will that show the results?

--

.pull-right[


```r
top_viewers &lt;- ratings %&gt;% 
  filter(series == 1) %&gt;% 
  top_n(1, viewers_7day)

top_viewers
#&gt; # A tibble: 1 x 9
#&gt;   series episode uk_airdate viewers_7day viewers_28day network_rank
#&gt;   &lt;fct&gt;  &lt;fct&gt;   &lt;date&gt;            &lt;dbl&gt;         &lt;dbl&gt;        &lt;int&gt;
#&gt; 1 1      5       2010-09-14         3.03             1           NA
#&gt; # ... with 3 more variables: channels_rank &lt;int&gt;, bbc_iplayer_requests &lt;dbl&gt;,
#&gt; #   episode_count &lt;dbl&gt;
```

]

???
Yes, but with the data column types again.

---

# Code chunks

.pull-left[




````
```{r}
ggplot(viewers, aes(episode, viewers, 
                    colour = days, 
                    group = days)) + 
  geom_point() + 
  geom_line() + 
  labs(x = "Episode", 
       y = "Viewers (millions)") +
  expand_limits(y = 0) 
```
````

What about this one?

]

--

.pull-right[


```r
ggplot(viewers, aes(episode, viewers, 
                    colour = days, 
                    group = days)) + 
  geom_point() + 
  geom_line() + 
  labs(x = "Episode", 
       y = "Viewers (millions)") +
  expand_limits(y = 0) 
```

&lt;img src="01-basics_files/figure-html/unnamed-chunk-23-1.png" width="60%" style="display: block; margin: auto;" /&gt;

]

---
class: live-code

# Adding/running chunks

Together we:

1. Add chunks with button or:

   Ctrl + Alt + `i` (Windows/Linux)
   
   Command (or Cmd) `‚åò` + Option (or Alt) `‚å•` +  `i` (Mac)
   
1. Run chunks by:

   Run current chunk button (interactive)
   
   Knit button / run all chunks

???

Shortcut key to run a chunk Ctrl + Shift + Enter

Shortcuts for chunks can be amended or added in Tools/Modify Keyboard Shortcuts...

---

# Inline code

.pull-left[

The top viewed episode in series 1 was episode
``` `r top_viewers %&gt;% pull(episode)` ```

]

???
Combining code with text.

--

.pull-right[

The top viewed episode in series 1 was episode
5

]

---
class: inverse, center, middle

&lt;span class="fa-stack fa-4x"&gt;
  &lt;i class="fa fa-circle fa-stack-2x" style="color: #fff;"&gt;&lt;/i&gt;
  &lt;strong class="fa-stack-1x" style="color:#17a2b8;"&gt;4 &lt;/strong&gt;
&lt;/span&gt; 

--

# Controlling Output

---

# Chunk options

.pull-left[

````
```{r}
glimpse(ratings)
```
````

]

.pull-right[


```r
glimpse(ratings)
#&gt; Rows: 94
#&gt; Columns: 9
#&gt; $ series               &lt;fct&gt; 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3~
#&gt; $ episode              &lt;fct&gt; 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 7, 8, 1, 2, 3~
#&gt; $ uk_airdate           &lt;date&gt; 2010-08-17, 2010-08-24, 2010-08-31, 2010-09-07, ~
#&gt; $ viewers_7day         &lt;dbl&gt; 2.24, 3.00, 3.00, 2.60, 3.03, 2.75, 3.10, 3.53, 3~
#&gt; $ viewers_28day        &lt;dbl&gt; 7, 3, 2, 4, 1, 1, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1~
#&gt; $ network_rank         &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N~
#&gt; $ channels_rank        &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N~
#&gt; $ bbc_iplayer_requests &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N~
#&gt; $ episode_count        &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15~
```

]

???
Just a plain r means that R code runs. Chunks can also be SQL - requires SQL connections.

---

# echo

.pull-left[

````
```{r echo=FALSE}
glimpse(ratings)
```
````

]

.pull-right[


```
#&gt; Rows: 94
#&gt; Columns: 9
#&gt; $ series               &lt;fct&gt; 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3~
#&gt; $ episode              &lt;fct&gt; 1, 2, 3, 4, 5, 6, 1, 2, 3, 4, 5, 6, 7, 8, 1, 2, 3~
#&gt; $ uk_airdate           &lt;date&gt; 2010-08-17, 2010-08-24, 2010-08-31, 2010-09-07, ~
#&gt; $ viewers_7day         &lt;dbl&gt; 2.24, 3.00, 3.00, 2.60, 3.03, 2.75, 3.10, 3.53, 3~
#&gt; $ viewers_28day        &lt;dbl&gt; 7, 3, 2, 4, 1, 1, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1~
#&gt; $ network_rank         &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N~
#&gt; $ channels_rank        &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N~
#&gt; $ bbc_iplayer_requests &lt;dbl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, N~
#&gt; $ episode_count        &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15~
```

]

???
Echo (showing code) is default to TRUE. Setting to FALSE just returns the results, no code.

---

# eval

.pull-left[

````
```{r eval=FALSE}
glimpse(ratings)
```
````

]

.pull-right[


```r
glimpse(ratings)
```

]

???
Eval is short for evaluate and if set to FALSE stops the code from running. 
Good if the code is an example of broken code which would stop the report from 
running if set to TRUE (which is default).

---

# include

.pull-left[

````
```{r include=FALSE}
glimpse(ratings)
```
````

]

.pull-right[



]

???

[From RStudio lesson](https://rmarkdown.rstudio.com/lesson-3.html):

FALSE prevents code and results from appearing in the finished file. 
R Markdown still runs the code in the chunk, and the results can be used by other chunks.

---

# results

.pull-left[

````
```{r echo=TRUE, results='hide'}
glimpse(ratings)
```
````

]

.pull-right[


```r
glimpse(ratings)
```

]

???

Note here the code has more than one control and they are separated by a comma.

[From RMarkdown tips](https://garthtarr.github.io/meatR/tips.html):

results = 'hide' hide the results of the chunk output (i.e. don‚Äôt show them)
results = 'hold' hold the results of the chunk output until all commands in the 
chunk have been run

[On 'asis'](https://garrettgman.github.io/rmarkdown/authoring_rcodechunks.html)
Note the use of the results='asis' chunk option. This is required to ensure that
the raw table output isn‚Äôt processed further by knitr. The kable function 
includes several options to control the maximum number of digits for numeric 
columns, alignment, etc (refer to the knitr package documentation for additional
details)
---

# message / warning



![](https://www.tidyverse.org/images/tidyverse_1.2.0/tidyverse_1-2-0_pkg_load.gif)

???

This is an example of a detailed message from {tidyverse} but what if you wanted 
to not print that message when a chunk was run?

---

# message / warning

.pull-left[

````
```{r message=FALSE, warning=FALSE}
library(tidyverse)
```
````

]

.pull-right[


```r
library(tidyverse)
```

]

---

# Chunk option take-aways

+ Place between curly braces&lt;br&gt;`{r option=value}`

+ Multiple options separated by commas&lt;br&gt;`{r option1=value, option2=value}`

+ Careful! The `r` part is the **code engine** (other engines possible)

???

Such as sql which will require a database connection. Training and exercises available
through the NHS-R Community, [link here](https://philosopher-analyst.netlify.app/intro-r/nhsr-intro/11-sql-connection/)

---

# Chunk labels

.pull-left[

````
```{r peek, echo=FALSE, results='hide'}
glimpse(ratings)
```
````

]

.pull-right[

+ Place between curly braces&lt;br&gt;`{r label}`

+ Separated options with commas&lt;br&gt;`{r label, option1=value}`

+ Careful! No duplicate chunk labels

    ````
    ```{r peek}
    head(ratings)
    ```
    ````

    ```
    Error in parse_block(g[-1], g[1], params.src) : 
      duplicate label 'peek'
    Calls: &lt;Anonymous&gt; ... process_file -&gt; split_file -&gt; lapply -&gt; FUN -&gt; parse_block
    Execution halted
    ```

]

???

Live code example with the peek chunk, knit then repeat the chunk either by copying
or using Ctrl + Alt + i for a new chunk and then typing head(ratings)

---

class: middle, center

# A good chunk label

.pull-left[

### Good

`my-plot`

`myplot`

`myplot1`

`myplot-1`

`MY-PLOT`

]

.pull-right[

### Bad

`my_plot`

`my plot`

everything else!

]

---

# The setup chunk



.pull-left[

````
```{r setup, include=FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,   
  comment = "#&gt;", 
  out.width = "100%" 
)
```
````

]

.pull-right[

+ A special chunk label: `setup`

+ Typically #1

+ All following chunks will use these options (i.e., sets global chunk options)

+ **Tip**: set `include=FALSE`

+ You can (and should) use individual chunk options too

]

---
class: live-code

# Adding a setup chunk

We do this together:

1. Add `fig.path = "figs/"` as a knitr code chunk option for a single plot (watch what happens if we don't include the backslash!)

1. Knit and behold


???
Copy the fig.path = "figs/" and paste into the chunk settings for the first chart.
When this is run there is noticeably change to the report but a folder appears, called
figs and in there is `unnamed-chunk-2-1.png`.

If fig.path = "figs" is used instead the chart is not saved into a folder but in the main
area and the name is a concatenation of figs and the default `figsunnamed-chunk-2-1.png`

---
class: your-turn

# Your turn

Customize this report.

1. Label the code chunks with plots.

1. Add your setup chunk. 

1. Use the RStudio outline pane; rejoice!

1. Build a [graphical user interface](https://bookdown.org/yihui/rmarkdown/params-knit.html#the-interactive-user-interface) for parameters. 

__If this was easy,__ try adding a parameter for color palette and add in a package like [wesanderson](https://github.com/karthik/wesanderson) &amp;mdash; use the parameter in our ggplot2 code.

_psst...`01-bakeoff-report-alison.Rmd` is there..._

_psst-psst...answers on the next slide..._

<div class="countdown" id="timer_620abb0e" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
class: your-turn

# Answers

````
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, 
                      warning = FALSE,
                      message = FALSE,
                      fig.path = "alison-figs/")
```
````

```yaml
params:
  series:
    label: "Series:"
    value: 1
    input: numeric
    min: 1
    max: 9
    step: 1
  palette: 
    label: "Wes Anderson palette:"
    value: GrandBudapest1
    input: select
    choices: [GrandBudapest1, Darjeeling1, Darjeeling2, FantasticFox1, Royal2]
```




---

class: middle, center

# Take-aways

--

‚úîÔ∏è **Document your document:** use YAML to control the metadata

--

‚úîÔ∏è **Style your document:** use YAML to set the output format

--

‚úîÔ∏è **Organise your text:** use markdown headers with `#`

--

‚úîÔ∏è **Organise your code:** use `knitr` chunk labels

--

‚úîÔ∏è **Style your text:** use markdown **bold**, _italics_, &lt;i class="fas fa-list-ul"&gt;&lt;/i&gt; bullets, and &lt;i class="fas fa-list-ol"&gt;&lt;/i&gt; lists

--

‚úîÔ∏è **Style your output:** use `knitr` chunk options

--

üß∂ early, üß∂ often


---
class: middle, center

# ‚è±

# Time for a break!

<div class="countdown blink-colon noupdate-15" id="timer_620abaee" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">30</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---

background-position: top center
background-size: 100%
class: middle, center

Original authors

### Alison Hill  
[&lt;i class="fab fa-github"&gt;&lt;/i&gt; @apreshill](https://github.com/apreshill)  
[&lt;i class="fab fa-twitter"&gt;&lt;/i&gt; @apreshill](https://twitter.com/apreshill)

### Emi Tanaka  
[&lt;i class="fab fa-github"&gt;&lt;/i&gt; @emitanaka](https://github.com/emitanaka)  
[&lt;i class="fab fa-twitter"&gt;&lt;/i&gt; @statsgen](https://twitter.com/statsgen)


.footnote[All content is CC-BY. All art (unless otherwise noted) is by [Desir√©e De Leon](https://desiree.rbind.io/), CC-BY-NC-ND.]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "dracula",
"highlightLanguage": ["r", "yaml", "markdown"],
"slideNumberFormat": "",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
